AWSTemplateFormatVersion: '2010-09-09'
Description: CloudFormation template for parameters and secrets

Parameters:

  AlmaSruHost:
    Type: String
    Description: Hostname of Alma-SRU service
    Default: bibsys.alma.exlibrisgroup.com/view/sru/47BIBSYS_NETWORK

  ApiDomainName:
    Type: String
    Description: Hostname for API Gateway Custom Domain
    Default: api.<phase>.nva.aws.unit.no

  ApiDomainCertificateArn:
    Type: String
    Description: ARN for the certificate covering the  ApiDomainName in API Gateway

  ApplicationDomain:
    Type: String
    Description: Domainname for the frontend
    Default: frontend.<phase>.nva.aws.unit.no

  ApplicationDomainCertificateArn:
    Type: String
    Description: ARN for the certificate covering the ApplicationDomain

  BackendApiUrl: # AKA BackendDomainURL, BackendDomain
    Type: String
    Description: URL for backend API
    Default: https://api.dev.nva.aws.unit.no

  BareApiKey:
    Type: String
    Description: Key to access bare
    NoEcho: true

  BareHost:
    Type: String
    Description: Hostname for BARE API
    Default: alfa-a.bibsys.no

  CognitoAuthorizerArn:
    Type: String
    Description: ARN Identifier of the UserPool
    Default: arn:aws:cognito-idp:eu-west-1:884807050265:userpool/eu-west-1_cUIeoC2FS

  CognitoDomain: # AKA AmazonCognitoDomain:
    Type: String
    Description: Host/Domainname for NVA Cognito login
    Default: nva-develop.auth.eu-west-1.amazoncognito.com

  CognitoIdentityPoolId:
    Type: String
    Description: Identifier of the IdentityPool assosiated with the UserPool
    Default: eu-west-1:b8e7fd05-9a52-43cc-8c45-d8270d24a388

  CognitoUserPoolId:    # AKA UserPoolId
    Type: String
    Description: Identifier of the UserPool in Cognito
    Default: eu-west-1_cUIeoC2FS

  CognitoUserPoolAppClientId:
    Type: String
    Description: Identifier to use for the app clients to access this user pool
    Default: 2jpilc64hb25r1hj41p0hsfc0l

  OrcidBaseUrl:
    Type: String
    Description: URL to OrcId service
    Default: https://sandbox.orcid.org

  OrcidClientId:
    Type: String
    Description: ClientId to use for accessing OrcidBaseUrl
    Default: https://sandbox.orcid.org
    NoEcho: True

  OrcidClientSecret:
    Type: String
    Description: Secret to use for accessing OrcidBaseUrl
    NoEcho: True

  PublicationsTableStreamArn:
    Type: String
    Description: ARN of PublicationsTableStream

  UserServiceApiSecretArn:
    Type: String
    Description: ARN of secret for UserService

Resources:

  AlmaSruHostParameter:
    Type: AWS::SSM::Parameter
    Properties:
      Description: Hostname of Alma-SRU service
      Name: AlmaSruHost
      Type: String
      Value: !Ref AlmaSruHost

  ApiDomainNameParameter:
    Type: AWS::SSM::Parameter
    Properties:
      Description: Hostname for API Gateway Custom Domain
      Name: ApiDomainName
      Type: String
      Value: !Ref ApiDomainName

  ApiDomainCertificateArnParameter:
    Type: AWS::SSM::Parameter
    Properties:
      Description: ARN for the certificate covering the API host/domain/API Gateway Custom Domain
      Name: ApiDomainCertificateArn
      Type: String
      Value: !Ref ApiDomainCertificateArn

  ApplicationDomainParameter:
    Type: AWS::SSM::Parameter
    Properties:
      Description: Domainname for the frontend
      Name: ApplicationDomain
      Type: String
      Value: !Ref ApplicationDomain

  ApplicationDomainCertificateArnParameter:
    Type: AWS::SSM::Parameter
    Properties:
      Description: ARN for the certificate covering the ApplicationDomain
      Name: ApplicationDomainCertificateArn
      Type: String
      Value: !Ref ApplicationDomainCertificateArn

  BareApiKeyParameter:
    Type: AWS::SecretsManager::Secret
    Properties:
      Description: Hostname for BARE API
      Name: BareApiKey
      SecretString: !Ref BareApiKey

  BareHostParameter:
    Type: AWS::SSM::Parameter
    Properties:
      Description: Hostname for BARE API
      Name: BareHost
      Type: String
      Value: !Ref BareHost

  BackendDomainURLParameter:
    Type: AWS::SSM::Parameter
    Properties:
      Description: URL for backend API
      Name: BackendApiUrl
      Type: String
      Value: !Ref BackendApiUrl


  CognitoAuthorizerArnParameter:
    Type: AWS::SSM::Parameter
    Properties:
      Description: ARN Identifier of the UserPool
      Name: CognitoAuthorizerArn
      Type: String
      Value: !Ref CognitoAuthorizerArn

  CognitoDomainParameter:
    Type: AWS::SSM::Parameter
    Properties:
      Description: Host/Domainname for NVA Cognito login
      Name: CognitoDomain
      Type: String
      Value: !Ref CognitoDomain

  CognitoIdentityPoolIdParameter:
    Type: AWS::SSM::Parameter
    Properties:
      Description: Identifier of the IdentityPool assosiated with the UserPool
      Name: BackendDomain
      Type: String
      Value: !Ref CognitoIdentityPoolId

  CognitoUserPoolIdParameter:
    Type: AWS::SSM::Parameter
    Properties:
      Description: Identifier of the UserPool in Cognito
      Name: CognitoUserPoolId
      Type: String
      Value: !Ref CognitoUserPoolId

  CognitoUserPoolAppClientIdParameter:
    Type: AWS::SSM::Parameter
    Properties:
      Description: Identifier to use for the app clients to access this user pool
      Name: CognitoUserPoolAppClientId
      Type: String
      Value: !Ref CognitoUserPoolAppClientId

  OrcidBaseUrlParameter:
    Type: AWS::SSM::Parameter
    Properties:
      Description: URL to OrcId service
      Name: OrcidBaseUrl
      Type: String
      Value: !Ref OrcidBaseUrl

  OrcidClientIdParameter:
    Type: AWS::SecretsManager::Secret
    Properties:
      Description: ClientId to use for accessing OrcidBaseUrl
      Name: OrcidClientId
      SecretString: !Ref OrcidClientId

  OrcidClientSecretParameter:
    Type: AWS::SecretsManager::Secret
    Properties:
      Description: Secret to use for accessing OrcidBaseUrl
      Name: OrcidClientSecret
      SecretString: !Ref OrcidClientSecret

  PublicationsTableStreamArnParameter:
    Type: AWS::SSM::Parameter
    Properties:
      Description: ARN of PublicationsTableStream
      Name: PublicationsTableStreamArn
      Type: String
      Value: !Ref PublicationsTableStreamArn

  UserServiceApiSecretArnParameter:
    Type: AWS::SSM::Parameter
    Properties:
      Description: ARN of secret for UserService
      Name: UserServiceApiSecretArn
      Type: String
      Value: !Ref UserServiceApiSecretArn

